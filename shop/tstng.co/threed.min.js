THREE.MTLLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(f,c,h,b){var g=this,d=new THREE.FileLoader(this.manager);d.setPath(this.path),d.load(f,function(a){c(g.parse(a))},h,b)},setPath:function(a){this.path=a},setTexturePath:function(a){this.texturePath=a},setBaseUrl:function(a){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(a)},setCrossOrigin:function(a){this.crossOrigin=a},setMaterialOptions:function(a){this.materialOptions=a},parse:function(m){for(var w=m.split("\n"),f={},q=/\s+/,d={},b=0;b<w.length;b++){var j=w[b];if(0!==(j=j.trim()).length&&"#"!==j.charAt(0)){var x=j.indexOf(" "),p=x>=0?j.substring(0,x):j;p=p.toLowerCase();var k=x>=0?j.substring(x+1):"";if(k=k.trim(),"newmtl"===p){f={name:k},d[k]=f}else{if(f){if("ka"===p||"kd"===p||"ks"===p){var g=k.split(q,3);f[p]=[parseFloat(g[0]),parseFloat(g[1]),parseFloat(g[2])]}else{f[p]=k}}}}}var v=new THREE.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return v.setCrossOrigin(this.crossOrigin),v.setManager(this.manager),v.setMaterials(d),v}},THREE.MTLLoader.MaterialCreator=function(b,a){this.baseUrl=b||"",this.options=a,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,setCrossOrigin:function(a){this.crossOrigin=a},setManager:function(a){this.manager=a},setMaterials:function(a){this.materialsInfo=this.convert(a),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(h){if(!this.options){return h}var l={};for(var f in h){var k=h[f],d={};l[f]=d;for(var b in k){var g=!0,m=k[b],j=b.toLowerCase();switch(j){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(m=[m[0]/255,m[1]/255,m[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===m[0]&&0===m[1]&&0===m[2]&&(g=!1)}g&&(d[j]=m)}}return l},preload:function(){for(var a in this.materialsInfo){this.create(a)}},getIndex:function(a){return this.nameLookup[a]},getAsArray:function(){var b=0;for(var a in this.materialsInfo){this.materialsArray[b]=this.create(a),this.nameLookup[a]=b,b++}return this.materialsArray},create:function(a){return void 0===this.materials[a]&&this.createMaterial_(a),this.materials[a]},createMaterial_:function(h){function d(i,a){return"string"!=typeof a||""===a?"":/^https?:\/\//i.test(a)?a:i+a}function k(l,p){if(!g[l]){var m=b.getTextureParams(p,g),a=b.loadTexture(d(b.baseUrl,m.url));a.repeat.copy(m.scale),a.offset.copy(m.offset),a.wrapS=b.wrap,a.wrapT=b.wrap,g[l]=a}}var b=this,j=this.materialsInfo[h],g={name:h,side:this.side};for(var c in j){var f=j[c];if(""!==f){switch(c.toLowerCase()){case"kd":g.color=(new THREE.Color).fromArray(f);break;case"ks":g.specular=(new THREE.Color).fromArray(f);break;case"map_kd":k("map",f);break;case"map_ks":k("specularMap",f);break;case"map_bump":case"bump":k("bumpMap",f);break;case"ns":g.shininess=parseFloat(f);break;case"d":f<1&&(g.opacity=f,g.transparent=!0);break;case"Tr":f>0&&(g.opacity=1-f,g.transparent=!0)}}}return this.materials[h]=new THREE.MeshPhongMaterial(g),this.materials[h]},getTextureParams:function(d,c){var g,b={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},f=d.split(/\s+/);return(g=f.indexOf("-bm"))>=0&&(c.bumpScale=parseFloat(f[g+1]),f.splice(g,2)),(g=f.indexOf("-s"))>=0&&(b.scale.set(parseFloat(f[g+1]),parseFloat(f[g+2])),f.splice(g,4)),(g=f.indexOf("-o"))>=0&&(b.offset.set(parseFloat(f[g+1]),parseFloat(f[g+2])),f.splice(g,4)),b.url=f.join(" ").trim(),b},loadTexture:function(h,d,k,b,j){var g,c=THREE.Loader.Handlers.get(h),f=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager;return null===c&&(c=new THREE.TextureLoader(f)),c.setCrossOrigin&&c.setCrossOrigin(this.crossOrigin),g=c.load(h,k,b,j),void 0!==d&&(g.mapping=d),g}},THREE.OBJLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager,this.materials=null,this.regexp={vertex_pattern:/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,normal_pattern:/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,uv_pattern:/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}},THREE.OBJLoader.prototype={constructor:THREE.OBJLoader,load:function(f,c,h,b){var g=this,d=new THREE.FileLoader(g.manager);d.setPath(this.path),d.load(f,function(a){c(g.parse(a))},h,b)},setPath:function(a){this.path=a},setMaterials:function(a){this.materials=a},_createParserState:function(){var a={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(d,c){if(this.object&&!1===this.object.fromDeclaration){return this.object.name=d,void (this.object.fromDeclaration=!1!==c)}var f=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:d||"",fromDeclaration:!1!==c,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(i,h){var j=this._finalize(!1);j&&(j.inherited||j.groupCount<=0)&&this.materials.splice(j.index,1);var g={index:this.materials.length,name:i||"",mtllib:Array.isArray(h)&&h.length>0?h[h.length-1]:"",smooth:void 0!==j?j.smooth:this.smooth,groupStart:void 0!==j?j.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){var k={index:"number"==typeof l?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return k.clone=this.clone.bind(k),k}};return this.materials.push(g),g},currentMaterial:function(){if(this.materials.length>0){return this.materials[this.materials.length-1]}},_finalize:function(h){var g=this.currentMaterial();if(g&&-1===g.groupEnd&&(g.groupEnd=this.geometry.vertices.length/3,g.groupCount=g.groupEnd-g.groupStart,g.inherited=!1),h&&this.materials.length>1){for(var i=this.materials.length-1;i>=0;i--){this.materials[i].groupCount<=0&&this.materials.splice(i,1)}}return h&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),g}},f&&f.name&&"function"==typeof f.clone){var b=f.clone(0);b.inherited=!0,this.object.materials.push(b)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(c,b){var d=parseInt(c,10);return 3*(d>=0?d-1:d+b/3)},parseNormalIndex:function(c,b){var d=parseInt(c,10);return 3*(d>=0?d-1:d+b/3)},parseUVIndex:function(c,b){var d=parseInt(c,10);return 2*(d>=0?d-1:d+b/2)},addVertex:function(d,c,g){var b=this.vertices,f=this.object.geometry.vertices;f.push(b[d+0]),f.push(b[d+1]),f.push(b[d+2]),f.push(b[c+0]),f.push(b[c+1]),f.push(b[c+2]),f.push(b[g+0]),f.push(b[g+1]),f.push(b[g+2])},addVertexLine:function(c){var b=this.vertices,d=this.object.geometry.vertices;d.push(b[c+0]),d.push(b[c+1]),d.push(b[c+2])},addNormal:function(d,c,g){var b=this.normals,f=this.object.geometry.normals;f.push(b[d+0]),f.push(b[d+1]),f.push(b[d+2]),f.push(b[c+0]),f.push(b[c+1]),f.push(b[c+2]),f.push(b[g+0]),f.push(b[g+1]),f.push(b[g+2])},addUV:function(d,c,g){var b=this.uvs,f=this.object.geometry.uvs;f.push(b[d+0]),f.push(b[d+1]),f.push(b[c+0]),f.push(b[c+1]),f.push(b[g+0]),f.push(b[g+1])},addUVLine:function(c){var b=this.uvs,d=this.object.geometry.uvs;d.push(b[c+0]),d.push(b[c+1])},addFace:function(H,q,z,L,y,w,C,v,J,D,B,j){var I,x=this.vertices.length,A=this.parseVertexIndex(H,x),k=this.parseVertexIndex(q,x),G=this.parseVertexIndex(z,x);if(void 0===L?this.addVertex(A,k,G):(I=this.parseVertexIndex(L,x),this.addVertex(A,k,I),this.addVertex(k,G,I)),void 0!==y){var K=this.uvs.length;A=this.parseUVIndex(y,K),k=this.parseUVIndex(w,K),G=this.parseUVIndex(C,K),void 0===L?this.addUV(A,k,G):(I=this.parseUVIndex(v,K),this.addUV(A,k,I),this.addUV(k,G,I))}if(void 0!==J){var F=this.normals.length;A=this.parseNormalIndex(J,F),k=J===D?A:this.parseNormalIndex(D,F),G=J===B?A:this.parseNormalIndex(B,F),void 0===L?this.addNormal(A,k,G):(I=this.parseNormalIndex(j,F),this.addNormal(A,k,I),this.addNormal(k,G,I))}},addLineGeometry:function(g,d){this.object.geometry.type="Line";for(var j=this.vertices.length,b=this.uvs.length,h=0,f=g.length;h<f;h++){this.addVertexLine(this.parseVertexIndex(g[h],j))}for(var c=0,f=d.length;c<f;c++){this.addUVLine(this.parseUVIndex(d[c],b))}}};return a.startObject("",!1),a},parse:function(af){console.time("OBJLoader");var Q=this._createParserState();-1!==af.indexOf("\r\n")&&(af=af.replace(/\r\n/g,"\n")),-1!==af.indexOf("\\\n")&&(af=af.replace(/\\\n/g,""));for(var X=af.split("\n"),aj="",W="",U="",ab=[],S="function"==typeof"".trimLeft,ah=0,ac=X.length;ah<ac;ah++){if(aj=X[ah],aj=S?aj.trimLeft():aj.trim(),0!==aj.length&&"#"!==(W=aj.charAt(0))){if("v"===W){if(" "===(U=aj.charAt(1))&&null!==(ab=this.regexp.vertex_pattern.exec(aj))){Q.vertices.push(parseFloat(ab[1]),parseFloat(ab[2]),parseFloat(ab[3]))}else{if("n"===U&&null!==(ab=this.regexp.normal_pattern.exec(aj))){Q.normals.push(parseFloat(ab[1]),parseFloat(ab[2]),parseFloat(ab[3]))}else{if("t"!==U||null===(ab=this.regexp.uv_pattern.exec(aj))){throw new Error("Unexpected vertex/normal/uv line: '"+aj+"'")}Q.uvs.push(parseFloat(ab[1]),parseFloat(ab[2]))}}}else{if("f"===W){if(null!==(ab=this.regexp.face_vertex_uv_normal.exec(aj))){Q.addFace(ab[1],ab[4],ab[7],ab[10],ab[2],ab[5],ab[8],ab[11],ab[3],ab[6],ab[9],ab[12])}else{if(null!==(ab=this.regexp.face_vertex_uv.exec(aj))){Q.addFace(ab[1],ab[3],ab[5],ab[7],ab[2],ab[4],ab[6],ab[8])}else{if(null!==(ab=this.regexp.face_vertex_normal.exec(aj))){Q.addFace(ab[1],ab[3],ab[5],ab[7],void 0,void 0,void 0,void 0,ab[2],ab[4],ab[6],ab[8])}else{if(null===(ab=this.regexp.face_vertex.exec(aj))){throw new Error("Unexpected face line: '"+aj+"'")}Q.addFace(ab[1],ab[2],ab[3],ab[4])}}}}else{if("l"===W){var Z=aj.substring(1).trim().split(" "),K=[],ag=[];if(-1===aj.indexOf("/")){K=Z}else{for(var V=0,Y=Z.length;V<Y;V++){var N=Z[V].split("/");""!==N[0]&&K.push(N[0]),""!==N[1]&&ag.push(N[1])}}Q.addLineGeometry(K,ag)}else{if(null!==(ab=this.regexp.object_pattern.exec(aj))){var ae=(" "+ab[0].substr(1).trim()).substr(1);Q.startObject(ae)}else{if(this.regexp.material_use_pattern.test(aj)){Q.object.startMaterial(aj.substring(7).trim(),Q.materialLibraries)}else{if(this.regexp.material_library_pattern.test(aj)){Q.materialLibraries.push(aj.substring(7).trim())}else{if(null===(ab=this.regexp.smoothing_pattern.exec(aj))){if("\0"===aj){continue}throw new Error("Unexpected line: '"+aj+"'")}var ai=ab[1].trim().toLowerCase();Q.object.smooth="1"===ai||"on"===ai,(aa=Q.object.currentMaterial())&&(aa.smooth=Q.object.smooth)}}}}}}}}Q.finalize();var ad=new THREE.Group;ad.materialLibraries=[].concat(Q.materialLibraries);for(var ah=0,ac=Q.objects.length;ah<ac;ah++){var J=Q.objects[ah],k=J.geometry,q=J.materials,F="Line"===k.type;if(0!==k.vertices.length){var D=new THREE.BufferGeometry;D.addAttribute("position",new THREE.BufferAttribute(new Float32Array(k.vertices),3)),k.normals.length>0?D.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(k.normals),3)):D.computeVertexNormals(),k.uvs.length>0&&D.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(k.uvs),2));for(var I=[],G=0,A=q.length;G<A;G++){var C=q[G],aa=void 0;if(null!==this.materials&&(aa=this.materials.create(C.name),F&&aa&&!(aa instanceof THREE.LineBasicMaterial))){var B=new THREE.LineBasicMaterial;B.copy(aa),aa=B}aa||((aa=F?new THREE.LineBasicMaterial:new THREE.MeshPhongMaterial).name=C.name),aa.shading=C.smooth?THREE.SmoothShading:THREE.FlatShading,I.push(aa)}var z;if(I.length>1){for(var G=0,A=q.length;G<A;G++){C=q[G];D.addGroup(C.groupStart,C.groupCount,G)}z=F?new THREE.LineSegments(D,I):new THREE.Mesh(D,I)}else{z=F?new THREE.LineSegments(D,I[0]):new THREE.Mesh(D,I[0])}z.name=J.name,ad.add(z)}}return console.timeEnd("OBJLoader"),ad}},THREE.OrbitControls=function(aZ,aK){function aQ(){return 2*Math.PI/60/60*a5.autoRotateSpeed}function a4(){return Math.pow(0.95,a5.zoomSpeed)}function aP(a){az.theta-=a}function aM(a){az.phi-=a}function aV(a){a5.object instanceof THREE.PerspectiveCamera?aE/=a:a5.object instanceof THREE.OrthographicCamera?(a5.object.zoom=Math.max(a5.minZoom,Math.min(a5.maxZoom,a5.object.zoom*a)),a5.object.updateProjectionMatrix(),ab=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a5.enableZoom=!1)}function aL(a){a5.object instanceof THREE.PerspectiveCamera?aE*=a:a5.object instanceof THREE.OrthographicCamera?(a5.object.zoom=Math.max(a5.minZoom,Math.min(a5.maxZoom,a5.object.zoom/a)),a5.object.updateProjectionMatrix(),ab=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a5.enableZoom=!1)}function a1(a){ac.set(a.clientX,a.clientY)}function aW(a){at.set(a.clientX,a.clientY)}function aS(a){ar.set(a.clientX,a.clientY)}function aJ(b){ad.set(b.clientX,b.clientY),aw.subVectors(ad,ac);var a=a5.domElement===document?a5.domElement.body:a5.domElement;aP(2*Math.PI*aw.x/a.clientWidth*a5.rotateSpeed),aM(2*Math.PI*aw.y/a.clientHeight*a5.rotateSpeed),ac.copy(ad),a5.update()}function a0(a){al.set(a.clientX,a.clientY),aD.subVectors(al,at),aD.y>0?aV(a4()):aD.y<0&&aL(a4()),at.copy(al),a5.update()}function aO(a){af.set(a.clientX,a.clientY),aN.subVectors(af,ar),aa(aN.x,aN.y),ar.copy(af),a5.update()}function aR(a){}function ay(a){a.deltaY<0?aL(a4()):a.deltaY>0&&aV(a4()),a5.update()}function aY(a){switch(a.keyCode){case a5.keys.UP:aa(0,a5.keyPanSpeed),a5.update();break;case a5.keys.BOTTOM:aa(0,-a5.keyPanSpeed),a5.update();break;case a5.keys.LEFT:aa(a5.keyPanSpeed,0),a5.update();break;case a5.keys.RIGHT:aa(-a5.keyPanSpeed,0),a5.update()}}function a2(a){ac.set(a.touches[0].pageX,a.touches[0].pageY)}function aX(d){var c=d.touches[0].pageX-d.touches[1].pageX,f=d.touches[0].pageY-d.touches[1].pageY,b=Math.sqrt(c*c+f*f);at.set(0,b)}function aI(a){ar.set(a.touches[0].pageX,a.touches[0].pageY)}function ai(b){ad.set(b.touches[0].pageX,b.touches[0].pageY),aw.subVectors(ad,ac);var a=a5.domElement===document?a5.domElement.body:a5.domElement;aP(2*Math.PI*aw.x/a.clientWidth*a5.rotateSpeed),aM(2*Math.PI*aw.y/a.clientHeight*a5.rotateSpeed),ac.copy(ad),a5.update()}function ak(b){var a=b.touches[0].pageX-b.touches[1].pageX,d=b.touches[0].pageY-b.touches[1].pageY,c=Math.sqrt(a*a+d*d);al.set(0,c),aD.subVectors(al,at),aD.y>0?aL(a4()):aD.y<0&&aV(a4()),at.copy(al),a5.update()}function aG(a){af.set(a.touches[0].pageX,a.touches[0].pageY),aN.subVectors(af,ar),aa(aN.x,aN.y),ar.copy(af),a5.update()}function aF(a){}function av(a){if(!1!==a5.enabled){switch(a.preventDefault(),a.button){case a5.mouseButtons.ORBIT:if(!1===a5.enableRotate){return}a1(a),ao=ah.ROTATE;break;case a5.mouseButtons.ZOOM:if(!1===a5.enableZoom){return}aW(a),ao=ah.DOLLY;break;case a5.mouseButtons.PAN:if(!1===a5.enablePan){return}aS(a),ao=ah.PAN}ao!==ah.NONE&&(document.addEventListener("mousemove",aH,!1),document.addEventListener("mouseup",an,!1),a5.dispatchEvent(ag))}}function aH(a){if(!1!==a5.enabled){switch(a.preventDefault(),ao){case ah.ROTATE:if(!1===a5.enableRotate){return}aJ(a);break;case ah.DOLLY:if(!1===a5.enableZoom){return}a0(a);break;case ah.PAN:if(!1===a5.enablePan){return}aO(a)}}}function an(a){!1!==a5.enabled&&(aR(a),document.removeEventListener("mousemove",aH,!1),document.removeEventListener("mouseup",an,!1),a5.dispatchEvent(ax),ao=ah.NONE)}function aq(a){!1===a5.enabled||!1===a5.enableZoom||ao!==ah.NONE&&ao!==ah.ROTATE||(a.preventDefault(),a.stopPropagation(),ay(a),a5.dispatchEvent(ag),a5.dispatchEvent(ax))}function aU(a){!1!==a5.enabled&&!1!==a5.enableKeys&&!1!==a5.enablePan&&aY(a)}function ap(a){if(!1!==a5.enabled){switch(a.touches.length){case 1:if(!1===a5.enableRotate){return}a2(a),ao=ah.TOUCH_ROTATE;break;case 2:if(!1===a5.enableZoom){return}aX(a),ao=ah.TOUCH_DOLLY;break;case 3:if(!1===a5.enablePan){return}aI(a),ao=ah.TOUCH_PAN;break;default:ao=ah.NONE}ao!==ah.NONE&&a5.dispatchEvent(ag)}}function am(a){if(!1!==a5.enabled){switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:if(!1===a5.enableRotate){return}if(ao!==ah.TOUCH_ROTATE){return}ai(a);break;case 2:if(!1===a5.enableZoom){return}if(ao!==ah.TOUCH_DOLLY){return}ak(a);break;case 3:if(!1===a5.enablePan){return}if(ao!==ah.TOUCH_PAN){return}aG(a);break;default:ao=ah.NONE}}}function aA(a){!1!==a5.enabled&&(aF(a),a5.dispatchEvent(ax),ao=ah.NONE)}function aC(a){a.preventDefault()}this.object=aZ,this.domElement=void 0!==aK?aK:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=0.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return aj.phi},this.getAzimuthalAngle=function(){return aj.theta},this.saveState=function(){a5.target0.copy(a5.target),a5.position0.copy(a5.object.position),a5.zoom0=a5.object.zoom},this.reset=function(){a5.target.copy(a5.target0),a5.object.position.copy(a5.position0),a5.object.zoom=a5.zoom0,a5.object.updateProjectionMatrix(),a5.dispatchEvent(aT),a5.update(),ao=ah.NONE},this.update=function(){var d=new THREE.Vector3,b=(new THREE.Quaternion).setFromUnitVectors(aZ.up,new THREE.Vector3(0,1,0)),f=b.clone().inverse(),c=new THREE.Vector3,e=new THREE.Quaternion;return function(){var a=a5.object.position;return d.copy(a).sub(a5.target),d.applyQuaternion(b),aj.setFromVector3(d),a5.autoRotate&&ao===ah.NONE&&aP(aQ()),aj.theta+=az.theta,aj.phi+=az.phi,aj.theta=Math.max(a5.minAzimuthAngle,Math.min(a5.maxAzimuthAngle,aj.theta)),aj.phi=Math.max(a5.minPolarAngle,Math.min(a5.maxPolarAngle,aj.phi)),aj.makeSafe(),aj.radius*=aE,aj.radius=Math.max(a5.minDistance,Math.min(a5.maxDistance,aj.radius)),a5.target.add(aB),d.setFromSpherical(aj),d.applyQuaternion(f),a.copy(a5.target).add(d),a5.object.lookAt(a5.target),!0===a5.enableDamping?(az.theta*=1-a5.dampingFactor,az.phi*=1-a5.dampingFactor):az.set(0,0,0),aE=1,aB.set(0,0,0),!!(ab||c.distanceToSquared(a5.object.position)>au||8*(1-e.dot(a5.object.quaternion))>au)&&(a5.dispatchEvent(aT),c.copy(a5.object.position),e.copy(a5.object.quaternion),ab=!1,!0)}}(),this.dispose=function(){a5.domElement.removeEventListener("contextmenu",aC,!1),a5.domElement.removeEventListener("mousedown",av,!1),a5.domElement.removeEventListener("wheel",aq,!1),a5.domElement.removeEventListener("touchstart",ap,!1),a5.domElement.removeEventListener("touchend",aA,!1),a5.domElement.removeEventListener("touchmove",am,!1),document.removeEventListener("mousemove",aH,!1),document.removeEventListener("mouseup",an,!1),window.removeEventListener("keydown",aU,!1)};var a5=this,aT={type:"change"},ag={type:"start"},ax={type:"end"},ah={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},ao=ah.NONE,au=0.000001,aj=new THREE.Spherical,az=new THREE.Spherical,aE=1,aB=new THREE.Vector3,ab=!1,ac=new THREE.Vector2,ad=new THREE.Vector2,aw=new THREE.Vector2,ar=new THREE.Vector2,af=new THREE.Vector2,aN=new THREE.Vector2,at=new THREE.Vector2,al=new THREE.Vector2,aD=new THREE.Vector2,a3=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixColumn(c,0),a.multiplyScalar(-b),aB.add(a)}}(),ae=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixColumn(c,1),a.multiplyScalar(b),aB.add(a)}}(),aa=function(){var a=new THREE.Vector3;return function(c,f){var b=a5.domElement===document?a5.domElement.body:a5.domElement;if(a5.object instanceof THREE.PerspectiveCamera){var e=a5.object.position;a.copy(e).sub(a5.target);var d=a.length();d*=Math.tan(a5.object.fov/2*Math.PI/180),a3(2*c*d/b.clientHeight,a5.object.matrix),ae(2*f*d/b.clientHeight,a5.object.matrix)}else{a5.object instanceof THREE.OrthographicCamera?(a3(c*(a5.object.right-a5.object.left)/a5.object.zoom/b.clientWidth,a5.object.matrix),ae(f*(a5.object.top-a5.object.bottom)/a5.object.zoom/b.clientHeight,a5.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a5.enablePan=!1)}}}();a5.domElement.addEventListener("contextmenu",aC,!1),a5.domElement.addEventListener("mousedown",av,!1),a5.domElement.addEventListener("wheel",aq,!1),a5.domElement.addEventListener("touchstart",ap,!1),a5.domElement.addEventListener("touchend",aA,!1),a5.domElement.addEventListener("touchmove",am,!1),window.addEventListener("keydown",aU,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(a){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!a}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(a){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!a}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(a){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!a}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(a){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!a}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(a){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!a}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(a){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=a}}});